"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[570],{960:(P,h,s)=>{s.r(h),s.d(h,{default:()=>o});var a=s(734),f=s(514),A=s(256),E=Object.defineProperty,C=(i,t,e)=>t in i?E(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,c=(i,t,e)=>(C(i,typeof t!="symbol"?t+"":t,e),e);class F extends A.A{constructor(t,e){super({className:"login-field",tag:"label"}),c(this,"errorText"),c(this,"input"),this.input=(0,a.hF)({className:"login-field__input",type:e,required:!0}),this.errorText=(0,a.Ln)({className:"login-field__error-text"}),this.appendChildren([this.input,this.errorText])}getInputNode(){return this.input.getNode()}getInputValue(){return this.input.getNode().value}setErrorText(t){this.errorText.getNode().textContent=t}setInputAttribute(t,e){this.input.setAttribute(t,e)}}var S=s(182),I=s(342),N=s(144),v=s(849),T=s(747),w=s(329),L=Object.defineProperty,V=(i,t,e)=>t in i?L(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,p=(i,t,e)=>(V(i,typeof t!="symbol"?t+"":t,e),e),x=(i=>(i[i.LOGIN=3]="LOGIN",i[i.PASSWORD=6]="PASSWORD",i))(x||{});const m={LENGTH:!0},b={LENGTH:!0,CASE:!0,CHAR_SET:!0};class o extends I.A{constructor(t){super(t),p(this,"loginField",new F("Login:","text")),p(this,"passwordField",new F("Password:","password")),p(this,"loginButton",(0,f.A)({className:"login-page__submit-button button",textContent:"Login",buttonType:"submit"})),p(this,"onLoginButtonClick",g=>{g&&g.preventDefault();const u={login:this.loginField.getInputValue(),password:this.passwordField.getInputValue()},O=(0,v.Nt)({user:u},T.A.LOGIN_CURRENT);w.A.loginHandler(O)}),this.addClass("login-page"),this.initFields(),this.loginButton.addListener("click",this.onLoginButtonClick),this.loginButton.setAttribute("disabled","");const e=(0,a.a)({className:"login-page__about-link button button--continue",href:`#${S.A.ABOUT}`,textContent:"About"}),r=(0,a.h1)("visually-hidden","Fun chat application"),n=(0,a.Zd)({className:"login-page__form",method:"post"},this.loginField,this.passwordField,this.loginButton,e),l=(0,a.iW)({className:"login-page__main"},r,n),d=new N.A;n.setAttribute("autocomplete","on"),this.appendChildren([l,d])}initFields(){this.loginField.addClass("login-page__field"),this.loginField.setInputAttribute("autofocus",""),this.loginField.setInputAttribute("autocomplete","username"),this.loginField.addListener("input",this.onFieldInput.bind(this)),this.passwordField.addClass("login-page__field"),this.passwordField.setInputAttribute("autocomplete","current-password"),this.passwordField.addListener("input",this.onFieldInput.bind(this))}onFieldInput(t){this.isLoginValid()&&this.isPasswordValid()?this.loginButton.removeAttribute("disabled"):this.loginButton.setAttribute("disabled",""),this.loginField.getNode()===t.currentTarget?this.updateLoginErrorState():this.updatePasswordErrorState()}static getFieldValidationErrors(t,e,r,n){const{CHAR_SET:l=!1,LENGTH:d=!1,CASE:g=!1}=n;let u="";return l&&!/\d/.test(e)&&(u+=`${t} must contain at least one digit`),g&&(e.toUpperCase()===e||e.toLowerCase()===e)&&(u+=`${t} must contain both upper and lower case letters`),d&&e.length<r&&(u+=`${t} must be at least ${r} characters long`),u.split(t).join(`
\u2981  ${t}`).trim()}static updateFieldErrorState(t,e,r,n){const l=t.getInputValue(),d=o.getFieldValidationErrors(e,l,r,n);t.setErrorText(d),d?t.addClass("login-field--error"):t.removeClass("login-field--error")}static isFieldValid(t,e,r){const n=t.getInputValue();return!o.getFieldValidationErrors("",n,e,r)}isLoginValid(){return o.isFieldValid(this.loginField,3,m)}isPasswordValid(){return o.isFieldValid(this.passwordField,6,b)}updateLoginErrorState(){o.updateFieldErrorState(this.loginField,"Login",3,m)}updatePasswordErrorState(){o.updateFieldErrorState(this.passwordField,"Password",6,b)}}}}]);
